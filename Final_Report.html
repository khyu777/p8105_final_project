<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Data Science I: Final Report</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="bigpicture.html">Big Picture</a>
</li>
<li>
  <a href="subgroup.html">Subgroup Analysis</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="mailto:as5457@cumc.columbia.edu">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://khyu777.github.io/p8105_final_project/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data Science I: Final Report</h1>
<h4 class="date"><em>December 6th, 2018</em></h4>

</div>


<p><strong>Project Title</strong></p>
<p>Identification And Analysis of Trends And Disparities In HIV/AIDS For NYC</p>
<p><strong>Group Members</strong></p>
<ul>
<li>Bryce Wong (baw2160)</li>
<li>Sunny Siddique (as5457)</li>
<li>David Yu (ky2288)</li>
<li>Noah Kreski (Ntk2109)</li>
<li>Briana Lettsome (Bjl2150)</li>
</ul>
<p><strong>Motivation / Related Work</strong></p>
<p>According to the the past decade or so, improvements in drug therapies and prevention intervations have led to a decreased number of AIDS cases. In June, 2014, New York Governor Andrew Cuomo announced a new strategy designed to “End the Epidemic” in the state through a combination of increased HIV screening and testing, promotion of Pre-exposure Prophylaxis (PrEP) and improved linkage and retention in clinical care for HIV-positive persons. Since then, the New York City Department of Health and Mental Hygiene (DOHMH) reported a decline in new infections of nearly 8 percent annually or approximately 15% since the campaign was launched.</p>
<p>Despite efforts to reduce the number of new infections, the HIV Surveillance Annual Report presented a number of key points that motivated our decision to analyze HIV infections data. Amongst them, the most noteworthy are:</p>
<ul>
<li>Poor New Yorkers, as well as African-American and Hispanic New Yorkers, bear a disproportionate burden of illness and premature death.</li>
<li>Poor health is concentrated in certain New York City neighborhoods.</li>
<li>Factors associated with poor health, such as poor access to medical care, unhealthy behaviors, and poor living conditions, are more common among certain economic and racial/ethnic groups.</li>
</ul>
<p><strong>Initial Questions</strong></p>
<ul>
<li>Are there disparities in HIV infections / diagnoses based on NYC neighborhoods, if so, which neighborhoods have the highest incidence of HIV infections? Which neighborhoods have the lowest incidence?</li>
<li>Are there disparities in common demographic factors, including age, gender and race?</li>
<li>Does HIV related death rate appear elevated for certain social groups? What about non-HIV related deaths?</li>
<li>Are there specific observable trends in “percent viral suppression” over the past few years? If so, do the trends appear comparable to the DOHMH interventions following Governor Cuomo’s announcements in 2014?</li>
</ul>
<p><strong>Methods</strong></p>
<p>Data: Source, scraping method, cleaning, etc.</p>
<p>The data that was utilized for this project was the New York City Department of Health and Mental Hygeine (NYCDHMH) HIV/AIDS Surveillance Annual Report. This dataset is contains HIV/AIDS-related data on individuals thirteen years or older in all NYC boroughs as well as throughou the city (DOHMH HIV/AIDS Annual Report). The dataset was downloaded from NYCOpen Data, an open website that provides information and data to New Yorkers by the NYC government. Once downloaded, the raw data was imported into Rstudio as a csv file. Within this particular data there are The data contained within the dataset were collected between the years 2011 through 2016. The HIV/AIDS surveillance Annual Report contains eighteen variables, including year, age, race, HIV diagnoses, deaths, and percent viral suppression and percent linked to care. The variable outcomes used within the visualizations are defined as followed:</p>
<dl>
<dt><strong>Exploratory analysis</strong></dt>
<dd><p>Visualizations, summaries, and exploratory statistical analyses. Justify the steps you took, and show any major changes to your ideas.</p>
</dd>
</dl>
<p><strong>Big Picture Visualizations</strong></p>
<pre class="r"><code>hiv_year_data = hiv_data %&gt;% 
  filter(
    borough == &quot;All&quot;,
    uhf == &quot;All&quot;,
    gender == &quot;All&quot;,
    age == &quot;All&quot;,
    race == &quot;All&quot;
  )

all_death_rates = hiv_year_data %&gt;% 
  gather(key = death_rate_type, value = death_rate_nums, death_rate:non_hiv_related_death_rate) %&gt;% 
  filter(death_rate_nums != 99999)

stacked_death_plot = all_death_rates %&gt;% 
  filter(death_rate_type != &quot;death_rate&quot;)

ggplot(stacked_death_plot, aes(x = year, y = death_rate_nums, group = death_rate_type)) +   
  geom_col(aes(fill = death_rate_type)) +
  labs(
    title = &quot;Death Rate Types Over the Years&quot;,
    x = &quot;Year&quot;,
    y = &quot;Rate&quot;,
    Caption = &quot;Figure 1. Data from the NYCDOHMH HIV/AIDS Surveillance Annual Report&quot;  )</code></pre>
<p><img src="Final_Report_files/figure-html/unnamed-chunk-1-1.png" width="672" /> Data was first filtered so that the resulting data frame included only observations that aggregated results across all boroughs, UHFs, genders, ages, and races. This data frame was then tidied so that death rate type (i.e. “HIV-related death rate,” “Non-HIV-related death rate,” and overall “death rate”) was a single variable with the accompanying rate value in a separate variable column. Any observation that had a rate value of “99999” was filtered out, as this represented an observation where rate value was not calculated. Any observation where the death rate type was the total death rate was also filtered out. A stacked bar graph was then constructed with rate values plotted on the y-axis and year on the x-axis. Each bar represents the overall death rate per a year, segmented by death rate type (“HIV-related” and “Non-HIV-related”).</p>
<p>Figure 1 illustrates the death rate types over the years. According to the stacked bar graph, there is a decreasing trend in HIV-related death types over the years. Furthermore, there are more non-HIV-related deaths over the years. Interestingly, however, these deaths are also decreasing over time.</p>
<pre class="r"><code># Developing the code to visually assess HIV diagnosis rates over time by borough

HIV_diagnosis_data = hiv_data%&gt;%
               janitor::clean_names()%&gt;%
               filter(uhf %in% c(&quot;All&quot;))%&gt;%
               filter(borough != &quot;All&quot;)%&gt;%
               filter(gender == &quot;All&quot;)%&gt;%
               filter(age == &quot;All&quot;)

# Creating a plot to visually assess the above dataframe.

HIV_diagnosis_data%&gt;%
            ggplot(aes(x = year, y = hiv_diagnosis_rate, group = borough, 
                       color = borough))+geom_point() + geom_line() +
  labs(
    title = &quot;HIV Diagnosis Rate by Borough Over time&quot;,
    x = &quot;Year&quot;,
    y = &quot;HIV Diagnosis Rates&quot;,
    caption = &quot;Figure 2. Data from the NYCDOHMH HIV/AIDS Surveillance Annual Report&quot;
  )</code></pre>
<p><img src="Final_Report_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>In Figure 2, The original dataset was filtered down to get the summary data by borough for each year. Then, a bar plot was used for the HIV diagnosis rates, clustered by the five boroughs for each year in order of decreasing values (from Manhattan to Staten Island). Originally a spaghetti plot was used, however, it felt worthwhile to diversify the analytical methods and emphasize the differences between boroughs, not just the trends.</p>
<p>Figure 2 illustrates the HIV diagnosis rate by borough over time. It can be observed that, over time, the HIV diagnosis rates have decreased in all of the boroughs, except for Staten Island. For this particular borough, the HIV diagnosis rate actually increased in the years 2013 and 2016. Additionally, there is also an observed spike in diagnosis rates in the year 2014 for Brooklyn.</p>
<p>Also observed, over time, the Manhattan borough has the highest HIV diagnosis rate of all the NYC boroughs while Staten Island has the least. However, in 2015, the Bronx has a higher number of HIV diagnosis rates compared to Manhattan. Lastly, the Queens borough appears to have a relatively static change in HIV diagnosis rates.</p>
<p><strong>Subgroup Visualizations</strong></p>
<pre class="r"><code>hiv = hiv_data %&gt;%
  filter(borough == &quot;All&quot;) %&gt;%
  select(year, race, hiv_diagnosis_rate, gender) %&gt;%
  filter(!race == &quot;All&quot;)

hiv %&gt;%
  ggplot(aes(x = year, y = hiv_diagnosis_rate, color = race, group = race)) +
  geom_line() +
  facet_grid(~gender) +
   labs(
    title = &quot;HIV Diagnosis Rates Over Time by Race&quot;,
    x = &quot;Year&quot;,
    y = &quot;HIV Diagnosis Rates&quot;,
    caption = &quot;Figure 3. Data from the NYCDOHMH HIV/AIDS Surveillance Annual Report&quot;
  )</code></pre>
<p><img src="Final_Report_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>In order to assess the HIV diagnosis rates by race, the ‘All’ observations within the borough variable was kept in the dataset (Figure 3). This was done to ensure that the output sought was not confounded by results specific to each borough, but rather to all boroughs. The variables year, race, gender and HIV diagnosis rates were spepcifically selected for this analysis. Additonally, being that the race variable was being visually assessed, the ‘All’ observations within the variable was filtered out. We thought it would have been interesting to observe the differences in HIV diagnosis rates by race and gender and, as such, the spaghetti plot was faceted by gender.</p>
<p>Figure 3 illustrates the HIV diagnosis rates by race and faceted by gender over time. It can be observed that, regardless of gender, Blacks have the highest numbers of diagnosis rates with Latinos/Hispanics having the second highest rates over the 6-year period. Furthermore, Asian/Pacific Islander appears to have the lowest numbers of HIV diagnosis rates. There is also an interesting peak observed among the race Other/Unknown observed in the year 2013, that cannot be explained. Additionally, there is also an observed decrease in the rates of HIV diagnosis rates in the Black and Other/Unknown raceson when not looking at differentiation by gender.</p>
<p>When visually assessing the plot by gender, males have a much higher HIV diagnosis rates compared to females. Looking more closely, the diagnosis rates of Black males are significantly larger compared to Black females with the same distinction being made in all races, though not as wide. In Black males and females, there is a decrease in IV diagnosis rates over time. There is also a slight decrease in the Latino/Hispanic population in females, but an increase in the males. Furthermore, while there is a decrease in HIV diagnosis rates within White and Asian/Pacific Islander males, in females, there appears to be no linear change over time.</p>
<pre class="r"><code>split_by_race = hiv_data %&gt;% 
  filter(
    age == &quot;All&quot;,
    borough == &quot;All&quot;,
    uhf == &quot;All&quot;,
    race != &quot;All&quot;
    ) 

ggplot(split_by_race, aes(x = year, y = percent_viral_suppression, group = race)) +   
  geom_line(aes(color = race)) +
  facet_grid(~gender) +
  labs(
    title = &quot;Percent Viral Suppression By Race Over the Years&quot;,
    x = &quot;Year&quot;,
    y = &quot;Percent Viral Suppression&quot;,
    caption = &quot;Figure 4. Data from the NYCDOHMH HIV/AIDS Surveillance Annual Report&quot;
  )</code></pre>
<p><img src="Final_Report_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Percent viral suppression by race and faceted by gender: Data was first filtered so that the resulting data frame included only observations that aggregated results across all boroughs, UHFs, and ages. This data frame also filtered out any observations that aggregated data across race, as we wanted to be able to explore HIV outcomes by different races. There were no observations that aggregated outcomes across all genders by each race, so I made the decision to leave these outcomes split by gender instead of manually combining findings for each gender. This meant I had to facet by gender in the resulting plot that explores changes in an outcome for each race across years. A spaghetti plot was thus constructed, faceted by gender, showing change in “percent viral suppression” on the y-axis for each race over years (on the x-axis).</p>
<pre class="r"><code>hiv_age =
  hiv_data %&gt;%
  filter(age != &quot;All&quot;, borough == &quot;All&quot;, uhf == &quot;All&quot;)

#HIV diag rate over time by age groups

hiv_age %&gt;% 
  ggplot(aes(year, hiv_diagnosis_rate)) +
  geom_line(aes(group = age, color = age)) + 
  facet_wrap(~gender) +
  labs(
    title = &quot;HIV Diagnosis Rates Over Time by Age Group&quot;,
    x = &quot;Year&quot;,
    y = &quot;HIV Diagnosis Rates&quot;,
    caption = &quot;Figure 5. Data from the NYCDOHMH HIV/AIDS Surveillance Annual Report&quot;
  )</code></pre>
<p><img src="Final_Report_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>In Figure 5, the data was first filtered to obtain rows that only contained values for gender and age. Then, HIV diagnosis rates over time was plotted as a line graph, grouped by age groups and colored accordingly. To see if the rate distribution among age groups differed by gender, the plot was faceted by gender as well. Similar to the observations made in Figure 3, males have disproportionately higher HIV diagnosis rates compared to females. In Figure 4, however, within females, there appears to be a relatively similar distribution of HIV diagnosis rates among age groups over time. Conversely, among males, the diagnosis rates differs drastically by age groupp. The 20-29 age group has the highest HIV diagnosis rates over time.Individuals within the 60+ age group has the lowest HIV diagnosis rates over time. On a whole, for the age groups 20-29, 30-39, and 40-49, there appears to be a decrease in HIV diagnosis rates. For the remaining age groups, the trend appears to remain constant at the year 2015.</p>
<p><strong>Additional Statistical Analysis</strong></p>
<p>Our exploratory data visualizations indicated that there are strong disparities in HIV Infection Rates amongst the five boroughs, various age groups and genders. As a result, we decided to fit a multiple linear regression model to compute parameter estimates and to see whether these disparities are statistically significant at the 5% level of significance.</p>
<pre class="r"><code>hiv_clean = hiv_data %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(borough != &quot;All&quot;)%&gt;%
  filter(gender != &quot;All&quot;)%&gt;%
  filter(age != &quot;All&quot;) %&gt;% #Filtering out aggregate variables
  mutate(borough = forcats::fct_relevel(borough, c(&quot;Manhattan&quot;, &quot;Bronx&quot;, &quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;))) 
#Reordering to make Manhattan the reference borough.

linear_fit = lm(hiv_diagnosis_rate ~ gender + borough + age, data = hiv_clean) 

linear_clean = linear_fit %&gt;%
  broom::tidy() %&gt;% 
  mutate(term = str_replace(term, &quot;^borough&quot;, &quot;Borough: &quot;)) %&gt;% 
  mutate(term = str_replace(term, &quot;^gender&quot;, &quot;Gender: &quot;)) %&gt;% 
  mutate(term = str_replace(term, &quot;^age&quot;, &quot;Age Group: &quot;))

linear_clean %&gt;% 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">8.638</td>
<td align="right">2.026</td>
<td align="right">4.263</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Gender: Male</td>
<td align="right">38.946</td>
<td align="right">1.264</td>
<td align="right">30.800</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Borough: Bronx</td>
<td align="right">0.330</td>
<td align="right">2.014</td>
<td align="right">0.164</td>
<td align="right">0.870</td>
</tr>
<tr class="even">
<td align="left">Borough: Brooklyn</td>
<td align="right">-12.317</td>
<td align="right">1.809</td>
<td align="right">-6.808</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Borough: Queens</td>
<td align="right">-26.336</td>
<td align="right">1.848</td>
<td align="right">-14.249</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Borough: Staten Island</td>
<td align="right">-33.784</td>
<td align="right">2.338</td>
<td align="right">-14.451</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Age Group: 20 - 29</td>
<td align="right">42.615</td>
<td align="right">2.190</td>
<td align="right">19.458</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Age Group: 30 - 39</td>
<td align="right">31.384</td>
<td align="right">2.190</td>
<td align="right">14.330</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Age Group: 40 - 49</td>
<td align="right">29.515</td>
<td align="right">2.190</td>
<td align="right">13.476</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Age Group: 50 - 59</td>
<td align="right">13.299</td>
<td align="right">2.190</td>
<td align="right">6.072</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Age Group: 60+</td>
<td align="right">-5.407</td>
<td align="right">2.190</td>
<td align="right">-2.469</td>
<td align="right">0.014</td>
</tr>
</tbody>
</table>
<p>Notable results from our multiple linear regression analysis include:</p>
<ul>
<li>Compared to Manhattan, all boroughs have a statistically significantly different HIV infection rate (p&lt;0.01), adjusting for gender and age group. In particular, on average, the Bronx has a 0.330 percentage point higher HIV infection rate compared to Manhattan, adjusting for gender and age group.</li>
<li>On average, males have a 38.9 percentage point higher HIV infection rate compared to females, adjusting for borough and age group.</li>
<li>On average, compared to 13-19 year olds, 20-29 year olds have a 42.6 percentage point higher HIV infection rate (p&lt;0.01), adjusting for gender and borough. With age, the mean difference in HIV infection rate appears to decrease, adjusting for gender and borough.</li>
</ul>
<p><strong>Discussion</strong></p>
<p><strong>Data Can Be Found Here</strong></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
